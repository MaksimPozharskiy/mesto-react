{"version":3,"sources":["images/logo.svg","components/Header.js","images/delete-icon.svg","contexts/CurrentUserContext.js","components/Card.js","images/editAvatar.svg","components/Main.js","components/Footer.js","components/ImagePopup.js","components/PopupWithForm.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","utils/api.js","components/App.js","index.js"],"names":["Header","className","src","logo","alt","CurrentUserContext","React","createContext","Card","card","onCardClick","onCardLike","onCardDelete","currentUser","useContext","isOwn","owner","_id","cardDeleteButtonClassName","isLiked","likes","some","item","cardLikeButtonClassName","deleteIcon","onClick","link","name","width","height","viewBox","fill","xmlns","d","length","Main","onEditProfile","onAddPlace","onEditAvatar","cards","avatar","editAvatar","type","about","map","Footer","ImagePopup","onClose","PopupWithForm","title","children","isOpen","handleSubmit","noValidate","onSubmit","EditProfilePopup","onUpdateUser","useState","setName","description","setDescription","useEffect","e","preventDefault","minLength","maxLength","id","placeholder","defaultValue","onChange","evt","target","value","required","EditAvatarPopup","onUpdateAvatar","avatarInput","useRef","current","ref","AddPlacePopup","nameInput","linkInput","api","baseUrl","headers","this","_baseUrl","_headers","fetch","then","response","_checkRequestResult","method","body","JSON","stringify","cardId","profession","urlAvatar","console","log","ok","json","Promise","reject","status","error","authorization","App","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","selectedCard","setSelectedCard","setCurrentUser","closeAllPopups","getUserInfo","data","catch","errorHandler","getInitialCards","cardList","setCards","Provider","i","unlikeCard","likeCard","newCard","newCards","c","deleteCard","filter","editUserInfo","updatedUser","addCard","editUserAvatar","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.c865d594.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/logo.c2821b38.svg\";","import logo from '../images/logo.svg';\r\n\r\nfunction Header() {\r\n  return (\r\n    <header className=\"header\">\r\n      <img src={logo} alt=\"Логотип Место\" className=\"header__logo\" />\r\n    </header>\r\n  );\r\n}\r\n\r\nexport default Header;","export default __webpack_public_path__ + \"static/media/delete-icon.e3c42771.svg\";","import React from 'react';\r\n\r\nexport const CurrentUserContext = React.createContext();\r\n","import deleteIcon from '../images/delete-icon.svg';\r\nimport React from 'react';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\n\r\nfunction Card({card, onCardClick, onCardLike, onCardDelete}) {\r\n\r\n  // Контекст\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n  // Определяем, являемся ли мы владельцем текущей карточки\r\n  const isOwn = card.owner._id === currentUser._id;\r\n\r\n  // Создаём переменную, которую после зададим в `className` для кнопки удаления\r\n  const cardDeleteButtonClassName = (\r\n    `${isOwn ? 'grid-item__delete-icon' : 'grid-item__delete-icon_hidden'}`\r\n  ); \r\n\r\n  // Определяем, есть ли у карточки лайк, поставленный текущим пользователем\r\n  const isLiked = card.likes.some(item => item._id === currentUser._id);\r\n\r\n  // Создаём переменную, которую после зададим в `className` для кнопки лайка\r\n  const cardLikeButtonClassName = `grid-item__like ${isLiked ? 'grid-item__like_liked' : ''}`; \r\n\r\n  function handleClick() {\r\n    onCardClick(card);\r\n  } \r\n\r\n  function handleLikeClick () {\r\n    onCardLike(card);\r\n  }\r\n\r\n  function handleDeleteClick() {\r\n    onCardDelete(card);\r\n  }\r\n\r\n  return (\r\n    <li className=\"grid-item\">\r\n      <img src={deleteIcon} alt=\"Удаление карточки\" className={cardDeleteButtonClassName} onClick={handleDeleteClick} />\r\n      <img src={card.link} alt={card.name} className=\"grid-item__image\" onClick={handleClick} />\r\n      <div className=\"grid-item__wrap\">\r\n        <h3 className=\"grid-item__name\">{card.name}</h3>\r\n        <div className=\"grid-item__like-container\">\r\n          <svg className={cardLikeButtonClassName} width=\"21\" height=\"19\" viewBox=\"0 0 21 19\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" onClick={handleLikeClick}>\r\n            <path  d=\"M19.154 9.33822C21.294 7.19832 21.294 3.72364 19.154 1.60492C17.014 -0.534975 13.5392 -0.534975 11.3992 1.60492L10.361 2.66428L9.32276 1.62611C7.18277 -0.534975 3.70792 -0.534975 1.58911 1.60492C0.550891 2.64309 0 4.02026 0 5.48217C0 6.94408 0.572079 8.32124 1.58911 9.35941L10.361 18.1309L19.154 9.33822Z\" />\r\n          </svg>\r\n          <p className=\"grid-item__like-counter\">{card.likes.length}</p>\r\n        </div>\r\n      </div>\r\n    </li>\r\n  )\r\n}\r\n\r\nexport default Card;","export default __webpack_public_path__ + \"static/media/editAvatar.ae1a976d.svg\";","import React from 'react';\r\nimport Card from './Card';\r\nimport editAvatar from '../images/editAvatar.svg';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\n\r\nfunction Main({onEditProfile, onAddPlace, onEditAvatar, onCardClick, cards, onCardLike, onCardDelete}) {\r\n\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n\r\n  return (\r\n    <main className=\"content\">\r\n      <section className=\"profile\">\r\n          <div className=\"profile__container\">\r\n            <div className=\"profile__avatar-wrapp\">\r\n              <img src={`${currentUser.avatar}`} alt=\"Аватар профиля\" className=\"profile__avatar\" />\r\n              <img src={editAvatar} alt=\"Смена аватара\" className=\"profile__avatar-edit\" onClick={onEditAvatar}/>\r\n            </div>\r\n            <div className=\"profile__info\">\r\n              <div className=\"profile__wrap\">\r\n                <h1 className=\"profile__name\">{currentUser.name}</h1>\r\n                <button type=\"button\" className=\"profile__edit-button\" onClick={onEditProfile} />\r\n              </div>\r\n              <p className=\"profile__profession\">{currentUser.about}</p>\r\n            </div>\r\n          </div>\r\n          <button type=\"button\" className=\"profile__add-button\" onClick={onAddPlace} />\r\n      </section>\r\n    \r\n      <section className=\"photos\">\r\n        <ul className=\"grid-photos\">\r\n          {cards.map((card) => <Card  \r\n            key={card._id} \r\n            card={card} \r\n            onCardClick={onCardClick}\r\n            onCardLike={onCardLike}\r\n            onCardDelete={onCardDelete}/>\r\n          )}\r\n        </ul>\r\n      </section>\r\n    </main>\r\n  );\r\n}\r\n\r\nexport default Main;","function Footer() {\r\n  return (\r\n    <footer className=\"footer\">\r\n      <p className=\"footer__copyright\">© 2020 Mesto Russia</p>\r\n    </footer>\r\n  );\r\n}\r\n\r\nexport default Footer;","function ImagePopup({card, onClose}) {\r\n\r\n  return (\r\n    <div className={`popup popup_type_image ${card ? 'popup_opened' : ''}`}>\r\n      <div className=\"popup__wrap\">\r\n        <img src={card.link} alt=\"\" className=\"popup__image\" />\r\n        <p className=\"popup__title-image\">{card.name}</p>\r\n        <button type=\"button\" className=\"popup__button-close\" onClick={onClose} />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ImagePopup;","function PopupWithForm({name, title, children, isOpen, onClose, handleSubmit}) {\r\n\r\n  return (\r\n      <div className={`popup popup_type_${name} ${isOpen ? 'popup_opened' : ''}`}>\r\n        <div className=\"popup__container\">\r\n          <h4 className=\"popup__title\">{title}</h4>\r\n          <form className=\"popup__form\" name={name} noValidate onSubmit={handleSubmit}>\r\n            {children}\r\n          </form>\r\n          <button type=\"button\" className=\"popup__button-close\" onClick={onClose} />\r\n        </div>\r\n      </div>\r\n  );\r\n}\r\n\r\nexport default PopupWithForm;","import React from 'react';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\nimport PopupWithForm from './PopupWithForm';\r\n\r\nfunction EditProfilePopup({isOpen, onClose, onUpdateUser}) {\r\n  const [name, setName] = React.useState();\r\n  const [description, setDescription ] = React.useState();\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n\r\n  React.useEffect(() => {\r\n    setName(currentUser.name);\r\n    setDescription(currentUser.about);\r\n  }, [currentUser])\r\n\r\n  function handleSubmit(e) {\r\n    // Запрещаем браузеру переходить по адресу формы\r\n    e.preventDefault();\r\n  \r\n    // Передаём значения управляемых компонентов во внешний обработчик\r\n    onUpdateUser({\r\n      name,\r\n      about: description,\r\n    });\r\n  } \r\n\r\n  return (\r\n    <PopupWithForm \r\n        name=\"edit\"\r\n        title=\"Редактировать профиль\"\r\n        isOpen={isOpen}\r\n        onClose={onClose}\r\n        handleSubmit={handleSubmit}>\r\n          <input \r\n            minLength=\"2\" \r\n            maxLength=\"40\" \r\n            type=\"text\" \r\n            className=\"popup__input popup__input_name_name\" \r\n            name=\"name\" \r\n            id=\"name-input\" \r\n            placeholder=\"Имя\" \r\n            defaultValue=\"Максим Хорс\" \r\n            onChange={(evt) => setName(evt.target.value)}\r\n            required\r\n            value={name} />\r\n          <span \r\n            className='popup__input-error popup__input-error_active' \r\n            id='name-input-error' />\r\n          <input \r\n            minLength=\"2\" \r\n            maxLength=\"200\" \r\n            type=\"text\" \r\n            className=\"popup__input popup__input_name_profession\" \r\n            name=\"profession\" \r\n            placeholder=\"Вид деятельности\" \r\n            id=\"profession-input\" \r\n            defaultValue=\"Конный спортсмен\" \r\n            onChange={(evt) => setDescription(evt.target.value)}\r\n            required\r\n            value={description} />\r\n          <span \r\n            className='popup__input-error popup__input-error_active' \r\n            id='profession-input-error' />\r\n          <input \r\n            type=\"submit\" \r\n            className=\"popup__button-save\" \r\n            defaultValue=\"Сохранить\" \r\n            name=\"submit\" />\r\n        </PopupWithForm>\r\n  );\r\n}\r\n\r\nexport default EditProfilePopup;","import PopupWithForm from './PopupWithForm';\r\nimport React from 'react';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\n\r\nfunction EditAvatarPopup({isOpen, onClose, onUpdateAvatar}) {\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n  const avatarInput = React.useRef();\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n  \r\n    onUpdateAvatar({\r\n      avatar: avatarInput.current.value\r\n    });\r\n  } \r\n\r\n  React.useEffect(() => {\r\n    avatarInput.current.value = currentUser.avatar;\r\n  }, [currentUser]);\r\n\r\n  return (\r\n    <PopupWithForm \r\n        name=\"avatar\"\r\n        title=\"Обновить аватар\"\r\n        children=\"\"\r\n        isOpen={isOpen}\r\n        onClose={onClose}\r\n        handleSubmit={handleSubmit}>\r\n          <input \r\n            type=\"url\" \r\n            placeholder=\"Ссылка на картинку\" \r\n            className=\"popup__input popup__input_name_link-avatar\" \r\n            name=\"avatar-input\" \r\n            id=\"avatar-input\" \r\n            required\r\n            ref={avatarInput}\r\n          />\r\n          <span \r\n            className='popup__input-error' \r\n            id='avatar-input-error'>Заполните это поле.</span>\r\n          <input \r\n            type=\"submit\" \r\n            className=\"popup__button-save\" \r\n            value=\"Сохранить\" \r\n            name=\"submit\" />\r\n    </PopupWithForm>\r\n  );\r\n}\r\n\r\nexport default EditAvatarPopup;","import PopupWithForm from './PopupWithForm';\r\nimport React from 'react';\r\n\r\nfunction AddPlacePopup({isOpen, onClose, onAddPlace}) {\r\n  const nameInput = React.useRef();\r\n  const linkInput = React.useRef();\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n\r\n    // Передаём значения управляемых компонентов во внешний обработчик\r\n    onAddPlace({\r\n      name: nameInput.current.value,\r\n      link: linkInput.current.value\r\n    });\r\n  }\r\n\r\n  return (\r\n    <PopupWithForm \r\n      name=\"add\"\r\n      title=\"Новое место\"\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      handleSubmit={handleSubmit}>\r\n        <input \r\n          ref={nameInput}\r\n          minLength=\"1\" \r\n          maxLength=\"30\" \r\n          type=\"text\" \r\n          placeholder=\"Название\" \r\n          className=\"popup__input popup__input_name_title-card\" \r\n          name=\"title-card\" \r\n          id=\"title-input\" \r\n          required />\r\n        <span \r\n          className='popup__input-error' \r\n          id='title-input-error'>Вы пропустили это поле.</span>\r\n        <input \r\n          ref={linkInput}\r\n          type=\"url\" \r\n          placeholder=\"Ссылка на картинку\" \r\n          className=\"popup__input popup__input_name_link-card\" \r\n          name=\"link-card\" \r\n          id=\"link-input\" \r\n          required />\r\n        <span \r\n          className='popup__input-error' \r\n          id='link-input-error'>Вы пропустили это поле.</span>\r\n        <input \r\n          type=\"submit\" \r\n          className=\"popup__button-save\" \r\n          value=\"Создать\" \r\n          name=\"submit\" />\r\n    </PopupWithForm>\r\n  )\r\n}\r\n\r\nexport default AddPlacePopup;","class Api {\r\n  constructor({baseUrl, headers}){\r\n    this._baseUrl = baseUrl;\r\n    this._headers = headers;\r\n  }\r\n\r\n  // Получить начальные карточки\r\n  getInitialCards() {\r\n    return fetch(`${this._baseUrl}/cards`, {headers: this._headers})\r\n    .then(response => this._checkRequestResult(response));\r\n  }\r\n\r\n  // Добавление новой карточки на сервер\r\n  addCard(name, link) {\r\n    return fetch(`${this._baseUrl}/cards`, {\r\n      method: 'POST',\r\n      headers: this._headers,\r\n      body: JSON.stringify({\r\n        name: name,\r\n        link: link\r\n      })\r\n    })\r\n    .then(response => this._checkRequestResult(response));\r\n  }\r\n\r\n  // Удалить карточку\r\n  deleteCard(cardId) {\r\n    return fetch(`${this._baseUrl}/cards/${cardId}`, {\r\n      method: 'DELETE',\r\n      headers: this._headers,\r\n    })\r\n    .then(response => this._checkRequestResult(response));\r\n  }\r\n\r\n  // Постановка лайка карточке\r\n  likeCard(cardId) {\r\n    return fetch(`${this._baseUrl}/cards/likes/${cardId}`, {\r\n      method: 'PUT',\r\n      headers: this._headers,\r\n    })\r\n    .then(response => this._checkRequestResult(response));\r\n  }\r\n\r\n  // Удаление лайка карточке\r\n  unlikeCard(cardId) {\r\n    return fetch(`${this._baseUrl}/cards/likes/${cardId}`, {\r\n      method: 'DELETE',\r\n      headers: this._headers,\r\n    })\r\n    .then(response => this._checkRequestResult(response));\r\n  }\r\n  \r\n  // Получить данные пользователя\r\n  getUserInfo() {\r\n    return fetch(`${this._baseUrl}/users/me`, {headers: this._headers})\r\n    .then(response => this._checkRequestResult(response));\r\n  }\r\n\r\n  // Отредактировать данные пользователя\r\n  editUserInfo(name, profession) {\r\n    return fetch(`${this._baseUrl}/users/me`, {\r\n      method: 'PATCH',\r\n      headers: this._headers,\r\n      body: JSON.stringify({\r\n        name: name,\r\n        about: profession\r\n      })\r\n    })\r\n    .then(response => this._checkRequestResult(response));\r\n  }\r\n\r\n  // Отредактировать аватар пользователя\r\n  editUserAvatar(urlAvatar) {\r\n    console.log(urlAvatar);\r\n    return fetch(`${this._baseUrl}/users/me/avatar`, {\r\n      method: 'PATCH',\r\n      headers: this._headers,\r\n      body: JSON.stringify({\r\n        avatar: urlAvatar\r\n      })\r\n    })\r\n    .then(response => this._checkRequestResult(response));\r\n  }\r\n\r\n  _checkRequestResult(response) {\r\n    if (response.ok) {\r\n      return response.json(); \r\n    }\r\n    return Promise.reject(`Возникла ошибка: ${response.status}`); \r\n  }\r\n\r\n  errorHandler(error) {\r\n    console.log(error);\r\n  }\r\n}\r\n\r\nconst api = new Api({\r\n  baseUrl: 'https://mesto.nomoreparties.co/v1/cohort-16',\r\n  headers: {\r\n    authorization: 'e8e5e3a7-8ba0-46eb-8d27-e0f2fc68826d',\r\n    'Content-Type': 'application/json'\r\n  }\r\n}); \r\n\r\nexport default api;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","import React from 'react';\r\nimport Header from './Header';\r\nimport Main from './Main';\r\nimport Footer from './Footer';\r\nimport ImagePopup from './ImagePopup';\r\nimport EditProfilePopup from './EditProfilePopup';\r\nimport EditAvatarPopup from './EditAvatarPopup';\r\nimport AddPlacePopup from './AddPlacePopup';\r\nimport api from '../utils/api';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\n\r\nfunction App() {\r\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = React.useState(false);\r\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = React.useState(false);\r\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = React.useState(false);\r\n  const [selectedCard, setSelectedCard] = React.useState(false);\r\n  const [currentUser, setCurrentUser] = React.useState();\r\n\r\n  React.useEffect(() => {\r\n    api.getUserInfo().then(data => setCurrentUser(data))\r\n    .catch(error => api.errorHandler(error));\r\n  }, []);\r\n\r\n  function handleEditAvatarClick() {\r\n    setIsEditAvatarPopupOpen(true);\r\n  }\r\n  function handleEditProfileClick() {\r\n    setIsEditProfilePopupOpen(true);\r\n  }\r\n  function handleAddPlaceClick() {\r\n    setIsAddPlacePopupOpen(true);\r\n  }\r\n\r\n  function handleCardClick(card) {\r\n    setSelectedCard(card);\r\n  }\r\n\r\n  function closeAllPopups() {\r\n    setIsEditAvatarPopupOpen(false);\r\n    setIsEditProfilePopupOpen(false);\r\n    setIsAddPlacePopupOpen(false);\r\n    setSelectedCard(false);\r\n  }\r\n\r\n  function handleUpdateUser({name, about}) {\r\n    api.editUserInfo(name, about).then(() => {\r\n      const updatedUser = { ...currentUser };\r\n        updatedUser.name = name;\r\n        updatedUser.about = about;\r\n\r\n        setCurrentUser({ ...updatedUser });\r\n      setIsEditProfilePopupOpen(false);\r\n    })\r\n    .catch(error => api.errorHandler(error));\r\n  }\r\n\r\n  function handleUpdateAvatar({avatar}) {\r\n    api.editUserAvatar(avatar).then((updatedUser) => {\r\n      setCurrentUser(updatedUser);\r\n      setIsEditAvatarPopupOpen(false);\r\n    })\r\n    .catch(error => api.errorHandler(error));\r\n  }\r\n\r\n  React.useEffect(() => {\r\n    api.getInitialCards().then(cardList => {\r\n      setCards(cardList);\r\n    })\r\n    .catch(error => api.errorHandler(error))\r\n  }, []);\r\n\r\n  // Карточки\r\n  const [cards, setCards] = React.useState([]);\r\n\r\n  function handleCardLike(card) {\r\n    // Проверяем, есть ли уже лайк на этой карточке\r\n    const isLiked = card.likes.some(i => i._id === currentUser._id);\r\n    // Отправляем запрос в API и получаем обновлённые данные карточки\r\n    const changeLike = isLiked ? api.unlikeCard(card._id) : api.likeCard(card._id)\r\n    changeLike.then((newCard) => {\r\n      // Формируем новый массив на основе имеющегося, подставляя в него новую карточку\r\n      const newCards = cards.map((c) => c._id === card._id ? newCard : c);\r\n      // Обновляем стейт\r\n      setCards(newCards);\r\n    })\r\n    .catch(error => api.errorHandler(error));\r\n  }\r\n\r\n  function handleCardDelete(card) {\r\n    api.deleteCard(card._id).then(() => {\r\n      const newCards = cards.filter((c) => c._id !== card._id);\r\n      setCards(newCards);\r\n    })\r\n    .catch(error => api.errorHandler(error));\r\n  }\r\n\r\n  function handleAddPlaceSubmit({name, link}) {\r\n    api.addCard(name, link).then((card) => {\r\n      setCards([card, ...cards]);\r\n      setIsAddPlacePopupOpen(false);\r\n    })\r\n    .catch(error => api.errorHandler(error));\r\n  }\r\n\r\n  return (\r\n    <CurrentUserContext.Provider value={currentUser}>\r\n      <div className=\"page\">\r\n        <Header />\r\n        {currentUser && // Рендерим элемент только после того как пришел ответ от React.useEffect\r\n          <Main \r\n            onEditProfile={handleEditProfileClick} \r\n            onAddPlace={handleAddPlaceClick} \r\n            onEditAvatar={handleEditAvatarClick}\r\n            onCardClick={handleCardClick}\r\n            cards={cards}\r\n            onCardLike={handleCardLike}\r\n            onCardDelete={handleCardDelete}\r\n            /> \r\n        }\r\n        <Footer />\r\n      </div>\r\n      {currentUser &&\r\n        <EditProfilePopup \r\n          isOpen={isEditProfilePopupOpen} \r\n          onClose={closeAllPopups} \r\n          onUpdateUser={handleUpdateUser}\r\n          /> \r\n      }\r\n      <AddPlacePopup\r\n        isOpen={isAddPlacePopupOpen}\r\n        onClose={closeAllPopups}\r\n        onAddPlace={handleAddPlaceSubmit}\r\n      />\r\n        {currentUser &&\r\n          <EditAvatarPopup \r\n            isOpen={isEditAvatarPopupOpen} \r\n            onClose={closeAllPopups}\r\n            onUpdateAvatar={handleUpdateAvatar}   \r\n          /> \r\n        }\r\n      <ImagePopup \r\n        card={selectedCard} \r\n        onClose={closeAllPopups}\r\n      />\r\n    </CurrentUserContext.Provider>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}